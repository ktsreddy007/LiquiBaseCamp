# Liquibase Validate Template
steps:
  - script: |
      set -euo pipefail
      echo "=== LIQUIBASE VALIDATE STAGE ==="
      echo "JAVA_HOME=$JAVA_HOME"
      echo "Liquibase location: $(which liquibase)"
      echo "Using properties file: config/liquibase.properties"
      echo "Validating changelog..."
      liquibase validate --defaultsFile=config/liquibase.properties --driver=com.microsoft.sqlserver.jdbc.SQLServerDriver --username=$(DB_USERNAME) --password=$(DB_PASSWORD) --url=$(DB_URL)
      echo "Validation successful at $(date)"
    displayName: "Validate Liquibase Changelog"
    env:
      DB_URL: $(DB_URL)
      DB_USERNAME: $(DB_USERNAME)
      DB_PASSWORD: $(DB_PASSWORD)

          